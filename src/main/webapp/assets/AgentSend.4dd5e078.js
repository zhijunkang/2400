import{C as e,A as l,p as a,a as o,w as s,r as d,o as u,c as t,f as i,h as n,t as r,g as c,D as m,G as b,F as p,k as g,i as f}from"./vendor.f97b600a.js";import{g as h,w as v,x as y,y as V,z as _,A as k,b as x,c as E,d as w,e as S,h as C,j as D,u as j,k as O,l as q,m as I,n as U}from"./index.5b164984.js";import{d as z}from"./download.ea7975ab.js";import"./index.9688d811.js";const R={name:"basetable",methods:{getLvl:e=>e<=102?"0转"+e:e<=210?"1转"+(e-102+14):e<=338?"2转"+(e-210+14):e<=459?"3转"+(e-338+59):"飞升"+(e-459+139)},setup(){const a=e({value1:"",value2:"",pageNum:1,pageSize:10}),o=l([]),d=l([]),u=l([]),t=l([]),i=l([]),n=l([]),r=l([]),c=l([]),m=l(0),b=l(null),p=l(null),g=e([]);v().then((e=>{p.value=e.data,-1==p.value.indexOf("物品")&&-1==p.value.indexOf("admin")||y().then((e=>{for(const l in e.data)g.push({label:l,value:e.data[l]})}))}));const f=()=>{V(a).then((e=>{n.value=e.data.list,m.value=e.data.total}))};f();const R=l(null),G=l(null),T=(e,l)=>{x(a).then((e=>{u.value=e.data,H.value=!0}))},M=(e,l)=>{w(a).then((e=>{t.value=e.data,L.value=!0}))},N=(e,l)=>{C(a).then((e=>{i.value=e.data,$.value=!0}))},P=l(!1),A=l(!1),H=l(!1),L=l(!1),$=l(!1),B=l(!1),F=l(!1),J=l(!1),K=l(!1),Q=l(!1),W=l(!1),X=l(!1);let Y=e({role_id:"",rolename:"",type:"坐骑",user_id:"",goodsid:""}),Z=e({rgid:"",goodsname:"",value:"",role_id:""}),ee=e({babyage:0,babyid:2001,babyname:"多少的宝宝",childSex:1,daode:0,mingqi:0,naili:0,neili:0,outcome:null,panni:0,parts:"-1|-1|-1|-1",pilao:0,qingmi:0,qizhi:0,roleid:11,talents:"1=1|2=1|3=1",wanxing:0,wenbao:0,xiaoxin:0,yangyujin:0,zhili:0}),le=e({assistance:"",baoactive:0,baoap:"",baoid:0,baoname:"",baoquality:"",baoreply:"0",baoshot:"0",baospeed:"0",baotype:"",equipment:0,fushis:null,fusum:0,gethard:"",goodskill:"",kangxing:"",lingbaoexe:0,lingbaolvl:0,lingbaoqihe:0,operation:null,resistshot:"0",roleid:0,skills:null,skillsum:0,skin:"",tianfuskill:""}),ae=e({bone:0,exp:0,gradeexp:0,live:0,mid:0,mountid:0,mountlvl:0,mountname:"",mountskill:[],moveGrade:null,othrersid:null,power:0,Proficiency:0,roleid:0,sid:null,sid3:null,sid4:null,sid5:null,spri:0,useNumber:0}),oe=e({sid:"",grade:"",turnRount:0,summoningname:"",friendliness:0,openSeal:1,lx:"",skill:"",nds:""}),se=-1;const de=e=>{let l=e.grade;l<=102?l=l:l<=221?l-=101:l<=362?l-=222:l=l<=543?l-363:l-544,e.grade=l},ue=l(!1),te=l(!1);return{goodsTableData:o,query:a,tableData:n,pageTotal:m,editVisible:B,form:Y,handleSearch:()=>{a.pageNum=1,f()},handlePageChange:e=>{a.pageNum=e,f()},handleDelete:(e,l,a)=>{Object.keys(Y).forEach((e=>{Y[e]=l[e]})),z("/api/report",{roleId:Y.role_id,type:a})},handleEdit:(e,l)=>{se=e,Object.keys(Z).forEach((e=>{console.log(l[e]),Z[e]=l[e]})),console.log(Z),B.value=!0},saveEdit:()=>{B.value=!1,q({roleId:Y.role_id}).then((e=>{(e.code=200)?s.success("成功更改满级"):s.success("修改失败")})),Object.keys(Y).forEach((e=>{n.value[se][e]=Y[e]}))},handleSizeChange:e=>{console.log(`每页 ${e} 条`),a.pageSize=e,f()},handleSelectionChange:e=>{console.log(`选择了 ${e} 条`)},clearVisible:ue,clearInfo:(e,l)=>{se=e,Object.keys(Y).forEach((e=>{console.log(l[e]),Y[e]=l[e]})),ue.value=!0},doClearInfo:()=>{ue.value=!1,I({roleId:Y.role_id,type:Y.type,roleName:Y.rolename}).then((e=>{(e.code=200)?s.success("删除"+Y.type+"信息成功,该角色已被踢下线"):s.success("修改失败")})),Object.keys(Y).forEach((e=>{n.value[se][e]=Y[e]}))},options:[{value:"1",label:"仙玉充值"},{value:"2",label:"VIP特权"},{value:"3",label:"小资礼包"},{value:"4",label:"土豪礼包"}],fullVisible:te,fullInfo:(e,l)=>{se=e,Object.keys(Y).forEach((e=>{console.log(l[e]),Y[e]=l[e]})),te.value=!0},doFullInfo:()=>{te.value=!1,U({roleId:Y.role_id,type:Y.type,rolename:Y.rolename}).then((e=>{(e.code=200)?s.success("删除"+Y.type+"信息成功,该角色已被踢下线"):s.success("修改失败")})),Object.keys(Y).forEach((e=>{n.value[se][e]=Y[e]}))},getUserGood:h,goodsVisible:P,mountHandleEdit:(e,l)=>{se=e,console.log(l),Object.keys(ae).forEach((e=>{ae[e]=l[e]})),console.log(ae),J.value=!0},mount:ae,mountEditVisible:J,saveMountEdit:()=>{E(ae).then((e=>{(e.code=200)?s.success("修改成功"):s.success("修改失败"),this.petEditVisible=!1}))},lingVisible:L,lingEditVisible:K,babyVisible:$,babyEditVisible:Q,lingHandleEdit:(e,l)=>{se=e,console.log(l),Object.keys(le).forEach((e=>{le[e]=l[e]})),console.log(le),K.value=!0},babyHandleEdit:(e,l)=>{se=e,Object.keys(ee).forEach((e=>{ee[e]=l[e]})),Q.value=!0},getLingData:(e,l)=>{Object.keys(Y).forEach((e=>{console.log(l[e]),Y[e]=l[e]})),a.value1=Y.role_id,M()},getBabyData:(e,l)=>{Object.keys(Y).forEach((e=>{console.log(l[e]),Y[e]=l[e]})),a.value1=Y.role_id,N()},petHandleEdit:(e,l)=>{se=e,Object.keys(oe).forEach((e=>{console.log(l[e]),oe[e]=l[e]})),de(oe),F.value=!0},lx:b,nds:r,skill:c,savePetEdit:()=>{r&&(oe.nds=r.value.join("|")),O(oe).then((e=>{(e.code=200)?s.success("修改成功"):s.success("修改失败"),this.petEditVisible=!1}))},mountTableData:u,mountVisible:H,getMountData:(e,l)=>{Object.keys(Y).forEach((e=>{console.log(l[e]),Y[e]=l[e]})),a.value1=Y.role_id,T()},lingTableData:t,babyTableData:i,saveLingEdit:()=>{S(le).then((e=>{(e.code=200)?s.success("修改成功"):s.success("修改失败"),this.petEditVisible=!1}))},ling:le,baby:ee,saveBabyEdit:()=>{D(ee).then((e=>{(e.code=200)?s.success("修改成功"):s.success("修改失败"),this.petEditVisible=!1}))},babyResOptions:[{value:"青楼龟奴",label:"青楼龟奴"},{value:"土财主",label:"土财主"},{value:"大法术师",label:"大法术师"},{value:"黑社会头目",label:"黑社会头目"},{value:"新科状元",label:"新科状元"},{value:"航海家",label:"航海家"},{value:"名门之后",label:"名门之后"},{value:"革命领袖",label:"革命领袖"},{value:"大诗人",label:"大诗人"},{value:"富家小主公",label:"富家小主公"},{value:"大内第一高手",label:"大内第一高手"},{value:"肉贩子",label:"肉贩子"},{value:"海盗头子",label:"海盗头子"},{value:"僵尸",label:"僵尸"},{value:"落第秀才",label:"落第秀才"},{value:"洛阳古惑仔",label:"洛阳古惑仔"},{value:"赌场老板",label:"赌场老板"},{value:"外科医生",label:"外科医生"},{value:"职业杀手",label:"职业杀手"}],getGoodsdata:(e,l)=>{Object.keys(Y).forEach((e=>{console.log(l[e]),Y[e]=l[e]})),a.value1=Y.role_id,X.value=!0},goods:Z,saveGoodEdit:()=>{B.value=!1,j(Z).then((e=>{(e.code=200)?s.success("修改成功"):s.success("修改失败")})),Object.keys(Y).forEach((e=>{n.value[se][e]=Y[e]}))},petVisible:A,petTableData:d,petEditVisible:F,pet:oe,options2:[{value:0,label:"0转"},{value:1,label:"1转"},{value:2,label:"2转"},{value:3,label:"3转"},{value:4,label:"飞升"}],isShowRechargeDialog:W,rowRecharge:(e,l)=>{Object.keys(Y).forEach((e=>{Y[e]=l[e]})),a.value1=Y.role_id,W.value=!0},handleRecharge:()=>{console.log("11111",Y),R.value.validate((e=>{if(!e)return;let l={Value1:Y.user_id,Value2:Y.money,Value3:Y.xianyu?Y.xianyu:"",Value4:Y.draw?Y.draw:"",Value5:Y.type,Value6:Y.rolename};console.log(l),_(l).then((e=>{(e.code=200)?s.success("充值完成"):s.success("充值失败"),W.value=!1})).catch((function(e){console.log(e)}))}))},rules:{password:[{required:!0,message:"解锁密码不能为空",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择充值类型"}],money:[{required:!0,message:"请输入充值金额",trigger:"blur"},{type:"number",message:"充值金额必须为数字"}],xianyu:[{required:!0,message:"请输入仙玉数量",trigger:"blur"},{type:"number",message:"仙玉数量必须为数字"}],goodsid:[{required:!0,message:"请选择物品",trigger:"blur"}],sum:[{required:!0,message:"请输入物品数量",trigger:"blur"},{type:"number",message:"物品数量必须为数字"}]},payRef:R,goodsOptions:g,isShowSendGoodsDialog:X,goodsRef:G,handleSendGoods:()=>{console.log("11111",Y),G.value.validate((e=>{if(!e)return;let l={Value1:Y.rolename,Value2:Y.goodsid,Value3:Y.sum};console.log(l),k(l).then((e=>{(e.code=200)?s.success("充值完成"):s.success("充值失败"),X.value=!1})).catch((function(e){console.log(e)}))}))},isAuth:e=>-1!=p.value.indexOf("admin")||(-1!=p.value.indexOf("充值")&&"充值"==e||-1!=p.value.indexOf("物品")&&"物品"==e)}}},G=f();a("data-v-69d4efda");const T={class:"crumbs"},M=i("i",{class:"el-icon-lx-cascades"},null,-1),N=n(" 玩家信息 "),P={class:"container"},A={class:"handle-box"},H=n("搜索"),L=n("物品 "),$=n(" 充值 "),B={class:"pagination"},F=i("template",{slot:"append"},[n("元")],-1),J=n("VIP特权按充值金额1元1天计算"),K=i("template",{slot:"append"},[n("仙玉")],-1),Q=i("template",{slot:"append"},[n("次")],-1),W=n("取消"),X=n("确定"),Y=n("取消"),Z=n("发送");o();const ee=G(((e,l,a,o,s,f)=>{const h=d("el-breadcrumb-item"),v=d("el-breadcrumb"),y=d("el-option"),V=d("el-select"),_=d("el-input"),k=d("el-button"),x=d("el-table-column"),E=d("el-tag"),w=d("el-table"),S=d("el-pagination"),C=d("el-form-item"),D=d("el-form"),j=d("el-dialog"),O=d("el-input-number");return u(),t("div",null,[i("div",T,[i(v,{separator:"/"},{default:G((()=>[i(h,null,{default:G((()=>[M,N])),_:1})])),_:1})]),i("div",P,[i("div",A,[i(V,{modelValue:o.query.value1,"onUpdate:modelValue":l[1]||(l[1]=e=>o.query.value1=e),placeholder:"类型",class:"handle-select mr10"},{default:G((()=>[i(y,{key:"角色ID",label:"角色ID",value:"1"}),i(y,{key:"角色名",label:"角色名",value:"2"}),i(y,{key:"账号",label:"账号",value:"3"})])),_:1},8,["modelValue"]),i(_,{modelValue:o.query.value2,"onUpdate:modelValue":l[2]||(l[2]=e=>o.query.value2=e),placeholder:"名称",class:"handle-input mr10"},null,8,["modelValue"]),i(k,{type:"primary",icon:"el-icon-search",onClick:o.handleSearch},{default:G((()=>[H])),_:1},8,["onClick"])]),i(w,{data:o.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",onSelectionChange:o.handleSelectionChange},{default:G((()=>[i(x,{type:"selection",width:"55"}),i(x,{width:"50px",prop:"role_id",label:"ID"}),i(x,{width:"150px",prop:"rolename",label:"角色名"}),i(x,{width:"150px",prop:"grade",label:"等级"},{default:G((e=>[i(E,{type:"success"},{default:G((()=>[n(r(f.getLvl(e.row.grade)),1)])),_:2},1024)])),_:1}),i(x,{width:"150px",prop:"localname",label:"账号"}),i(x,{label:"功能列表"},{default:G((e=>[o.isAuth("物品")?(u(),t(k,{key:0,style:{float:"left"},type:"primary",onClick:l=>o.getGoodsdata(e.$index,e.row)},{default:G((()=>[L])),_:2},1032,["onClick"])):c("",!0),o.isAuth("充值")?(u(),t(k,{key:1,style:{float:"left"},type:"primary",onClick:l=>o.rowRecharge(e.$index,e.row)},{default:G((()=>[$])),_:2},1032,["onClick"])):c("",!0)])),_:1})])),_:1},8,["data","onSelectionChange"]),i("div",B,[i(S,{onSizeChange:o.handleSizeChange,onCurrentChange:o.handlePageChange,"current-page":o.query.pageNum,"page-sizes":[10],"page-size":o.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:o.pageTotal},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),i(j,{title:"充值管理",modelValue:o.isShowRechargeDialog,"onUpdate:modelValue":l[12]||(l[12]=e=>o.isShowRechargeDialog=e),width:"380px"},{default:G((()=>[i(D,{ref:"payRef",model:o.form,"label-width":"80px",rules:o.rules},{default:G((()=>[m(i(C,{label:"用户ID",prop:"user_id"},{default:G((()=>[i(_,{modelValue:o.form.user_id,"onUpdate:modelValue":l[3]||(l[3]=e=>o.form.user_id=e),disabled:!0},null,8,["modelValue"])])),_:1},512),[[b,e.hide]]),i(C,{label:"角色名",prop:"rolename"},{default:G((()=>[i(_,{modelValue:o.form.rolename,"onUpdate:modelValue":l[4]||(l[4]=e=>o.form.rolename=e),disabled:!0},null,8,["modelValue"])])),_:1}),i(C,{label:"角色ID",prop:"role_id"},{default:G((()=>[i(_,{modelValue:o.form.role_id,"onUpdate:modelValue":l[5]||(l[5]=e=>o.form.role_id=e),disabled:!0},null,8,["modelValue"])])),_:1}),i(C,{label:"充值金额",prop:"money"},{default:G((()=>[i(_,{modelValue:o.form.money,"onUpdate:modelValue":l[6]||(l[6]=e=>o.form.money=e),modelModifiers:{number:!0}},{default:G((()=>[F])),_:1},8,["modelValue"])])),_:1}),"2"===o.form.type?(u(),t(C,{key:0},{default:G((()=>[i(E,{class:"pull-right",type:"warning"},{default:G((()=>[J])),_:1})])),_:1})):c("",!0),i(C,{label:"充值类型",prop:"type"},{default:G((()=>[i(V,{modelValue:o.form.type,"onUpdate:modelValue":l[7]||(l[7]=e=>o.form.type=e),placeholder:"请选择"},{default:G((()=>[(u(!0),t(p,null,g(o.options,(e=>(u(),t(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),"1"===o.form.type?(u(),t(C,{key:1,label:"仙玉数量",prop:"xianyu"},{default:G((()=>[i(_,{modelValue:o.form.xianyu,"onUpdate:modelValue":l[8]||(l[8]=e=>o.form.xianyu=e),modelModifiers:{number:!0}},{default:G((()=>[K])),_:1},8,["modelValue"])])),_:1})):c("",!0),i(C,{label:"抽奖次数",prop:"draw"},{default:G((()=>[i(_,{modelValue:o.form.draw,"onUpdate:modelValue":l[9]||(l[9]=e=>o.form.draw=e),modelModifiers:{number:!0}},{default:G((()=>[Q])),_:1},8,["modelValue"])])),_:1}),i(C,null,{default:G((()=>[i(k,{onClick:l[10]||(l[10]=e=>{o.isShowRechargeDialog=!1}),class:"pull-right margin-l-10"},{default:G((()=>[W])),_:1}),i(k,{type:"primary",onClick:l[11]||(l[11]=e=>o.handleRecharge()),class:"pull-right"},{default:G((()=>[X])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),i(j,{title:"物品发送",modelValue:o.isShowSendGoodsDialog,"onUpdate:modelValue":l[19]||(l[19]=e=>o.isShowSendGoodsDialog=e),width:"380px"},{default:G((()=>[i(D,{ref:"goodsRef",model:o.form,"label-width":"80px",rules:o.rules},{default:G((()=>[i(C,{label:"角色名",prop:"rolename"},{default:G((()=>[i(_,{modelValue:o.form.rolename,"onUpdate:modelValue":l[13]||(l[13]=e=>o.form.rolename=e),disabled:!0},null,8,["modelValue"])])),_:1}),i(C,{label:"角色ID",prop:"role_id"},{default:G((()=>[i(_,{modelValue:o.form.role_id,"onUpdate:modelValue":l[14]||(l[14]=e=>o.form.role_id=e),disabled:!0},null,8,["modelValue"])])),_:1}),i(C,{label:"选择物品",prop:"goodsid"},{default:G((()=>[i(V,{modelValue:o.form.goodsid,"onUpdate:modelValue":l[15]||(l[15]=e=>o.form.goodsid=e),filterable:"",placeholder:"可输入搜索"},{default:G((()=>[(u(!0),t(p,null,g(o.goodsOptions,(e=>(u(),t(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(C,{label:"数量",prop:"sum"},{default:G((()=>[i(O,{modelValue:o.form.sum,"onUpdate:modelValue":l[16]||(l[16]=e=>o.form.sum=e),modelModifiers:{number:!0},min:1,max:999},null,8,["modelValue"])])),_:1}),i(C,null,{default:G((()=>[i(k,{onClick:l[17]||(l[17]=e=>{o.isShowSendGoodsDialog=!1}),class:"pull-right margin-l-10"},{default:G((()=>[Y])),_:1}),i(k,{type:"primary",onClick:l[18]||(l[18]=e=>o.handleSendGoods()),class:"pull-right"},{default:G((()=>[Z])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}));R.render=ee,R.__scopeId="data-v-69d4efda";export default R;
